<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2026 æ‹›è²¡éº»å°‡ç´€éŒ„</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root { --bro-red: #e63946; --gf-green: #2a9d8f; --gold: #ffb703; --light: #fdfaf6; }
        body { font-family: -apple-system, sans-serif; background: var(--light); margin: 0; padding: 15px; }
        .card { background: white; border-radius: 20px; padding: 20px; margin-bottom: 15px; box-shadow: 0 8px 20px rgba(0,0,0,0.05); }
        h1, h3 { color: var(--bro-red); text-align: center; margin-top: 0; }
        .dashboard { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        .stat-card { padding: 15px; border-radius: 15px; text-align: center; color: white; }
        .bro { background: var(--bro-red); }
        .gf { background: var(--gf-green); }
        .stat-card h2 { color: white; margin: 5px 0; font-size: 24px; }
        label { display: block; margin-top: 10px; font-weight: bold; color: #555; font-size: 14px; }
        input, select, button { width: 100%; padding: 12px; margin-top: 5px; border-radius: 10px; border: 1px solid #ddd; font-size: 16px; box-sizing: border-box; }
        .btn-submit { background: linear-gradient(135deg, var(--bro-red), #b91d2a); color: white; border: none; margin-top: 20px; font-weight: bold; cursor: pointer; }
        .chip-group { display: flex; flex-wrap: wrap; gap: 8px; margin-top: 5px; }
        .chip { background: #eee; padding: 5px 12px; border-radius: 20px; font-size: 12px; cursor: pointer; }
        .history-item { display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid #eee; font-size: 14px; }
        .win { color: var(--bro-red); font-weight: bold; }
        .lose { color: #2196F3; font-weight: bold; }
    </style>
</head>
<body>
    <h1>ğŸ§§ 2026 æ‹›è²¡ç´€éŒ„</h1>
    <div class="card">
        <div class="dashboard">
            <div class="stat-card bro"><div>å¼Ÿå¼Ÿ (ç´…)</div><h2 id="bro-total">$0</h2></div>
            <div class="stat-card gf"><div>å¥³å‹ (ç¶ )</div><h2 id="gf-total">$0</h2></div>
        </div>
    </div>
    <div class="card">
        <h3>ğŸ“Š èª°æ‹‰ä½å¹³å‡ï¼Ÿ</h3>
        <div style="height: 180px;"><canvas id="myChart"></canvas></div>
    </div>
    <div class="card">
        <h3>ğŸ“ æˆ°æ³ç™»è¨˜</h3>
        <label>æ˜¯èª°åœ¨æ‰“ï¼Ÿ</label>
        <select id="player"><option value="å¼Ÿå¼Ÿ">å¼Ÿå¼Ÿ</option><option value="å¥³å‹">å¥³å‹</option></select>
        <label>æ—¥æœŸ (å¯å›æº¯è£œè¨˜)</label>
        <input type="date" id="date">
        <label>åœ°é»</label>
        <input type="text" id="location" placeholder="è¼¸å…¥åœ°é»">
        <div id="recent-locations" class="chip-group"></div>
        <label>é‡‘é¡</label>
        <input type="number" id="amount" placeholder="è´éŒ¢å¡«æ­£æ•¸ï¼Œè¼¸éŒ¢å¡«è² æ•¸">
        <label>ç‰¹åˆ¥æ¦®è­½ (é¸å¡«)</label>
        <input type="text" id="special" placeholder="å¤§ä¸‰å…ƒã€é€£5ã€æœ€é«˜å°æ•¸">
        <button class="btn-submit" onclick="saveRecord()">ğŸ’° å­˜å…¥ç´€éŒ„</button>
    </div>
    <div class="card">
        <h3>ğŸ“œ æœ€è¿‘ç´€éŒ„</h3>
        <div id="history-list"></div>
        <button onclick="clearAll()" style="background:none; color:#999; border:none; font-size:12px; margin-top:20px; width:100%; text-align:center;">æ¸…é™¤æ‰€æœ‰è³‡æ–™</button>
    </div>
    <script>
        let records = JSON.parse(localStorage.getItem('mjRecords')) || [];
        let chartInstance = null;
        document.getElementById('date').valueAsDate = new Date();
        updateUI();

        function saveRecord() {
            const amount = parseFloat(document.getElementById('amount').value);
            if(isNaN(amount)) return alert("è«‹è¼¸å…¥é‡‘é¡ï¼");
            const record = {
                id: Date.now(),
                date: document.getElementById('date').value,
                player: document.getElementById('player').value,
                location: document.getElementById('location').value,
                amount: amount,
                special: document.getElementById('special').value
            };
            records.push(record);
            localStorage.setItem('mjRecords', JSON.stringify(records));
            updateUI();
            document.getElementById('amount').value = "";
            document.getElementById('special').value = "";
            alert("å·²å„²å­˜ï¼");
        }

        function updateUI() {
            let broSum = 0, gfSum = 0, locs = new Set();
            const listDiv = document.getElementById('history-list');
            listDiv.innerHTML = "";
            records.sort((a,b) => new Date(b.date) - new Date(a.date)).forEach(r => {
                if(r.player === "å¼Ÿå¼Ÿ") broSum += r.amount; else gfSum += r.amount;
                if(r.location) locs.add(r.location);
                listDiv.innerHTML += `<div class="history-item"><span>${r.date} ${r.location || ''} (${r.player})</span><span class="${r.amount >= 0 ? 'win' : 'lose'}">${r.amount >= 0 ? '+' : ''}${r.amount}</span></div>`;
            });
            document.getElementById('bro-total').innerText = `$${broSum}`;
            document.getElementById('gf-total').innerText = `$${gfSum}`;
            const locGroup = document.getElementById('recent-locations');
            locGroup.innerHTML = "";
            Array.from(locs).slice(-5).forEach(l => {
                let span = document.createElement('span'); span.className = 'chip'; span.innerText = l;
                span.onclick = () => document.getElementById('location').value = l;
                locGroup.appendChild(span);
            });
            renderChart(broSum, gfSum);
        }

        function renderChart(b, g) {
            const ctx = document.getElementById('myChart').getContext('2d');
            if(chartInstance) chartInstance.destroy();
            let bVal = Math.abs(b), gVal = Math.abs(g);
            if(bVal === 0 && gVal === 0) { bVal = 1; gVal = 1; }
            chartInstance = new Chart(ctx, {
                type: 'doughnut',
                data: { labels: ['å¼Ÿå¼Ÿ', 'å¥³å‹'], datasets: [{ data: [bVal, gVal], backgroundColor: ['#e63946', '#2a9d8f'] }] },
                options: { maintainAspectRatio: false, plugins: { legend: { position: 'bottom' } } }
            });
        }

        function clearAll() { if(confirm("ç¢ºå®šè¦åˆªé™¤æ‰€æœ‰ç´€éŒ„å—ï¼Ÿ")) { localStorage.clear(); records = []; updateUI(); } }
    </script>
</body>
</html>
